        org 0000h          ; Inicio del programa

INICIO: ld a, 25           ; Cargar el número decimal (0-99) en el registro A
        ld e, a            ; Guardar el valor original de A en E
        call SQR           ; Llamar a la subrutina SQR para calcular la raíz cuadrada
        ; Ahora el registro C contiene la raíz cuadrada entera de 99
        ; En este caso, debería ser 9 (en decimal)

        halt               ; Detener el programa

; Subrutina SQR: Calcula la raíz cuadrada entera de un número en E (valor original)
SQR:    ld b, 0            ; Inicializar B = 0 (resultado de la raíz cuadrada)
        ld c, 1            ; Cargar C = 1 (contador para el cálculo de cuadrados)

LOOP:   ld a, c            ; Cargar C en A para calcular C^2
        ld d, c            ; Cargar C en D (para el ciclo de multiplicación)
        xor a              ; A = 0, limpiar A para el cálculo del cuadrado

MULT:   add a, d           ; A = A + D (sumar D repetidamente para hacer D^2)
        dec c              ; Decrementar C (número de veces que sumamos D)
        jr nz, MULT        ; Repetir hasta que C sea 0 (terminar la multiplicación)

        ld c, d            ; Restaurar el valor de C para el siguiente bucle
        ld a, e            ; Restaurar el valor original del número en A
        cp d               ; Comparar el cuadrado (D^2) con el número original
        jr c, LESS         ; Si A < D^2, continuar
        jr z, DONE         ; Si A == D^2, hemos encontrado la raíz exacta
        jr OVER            ; Si A > D^2, terminar con la raíz anterior

LESS:   inc b              ; Incrementar B (raíz cuadrada aproximada)
        inc c              ; Incrementar C (próximo valor a probar)
        jr LOOP            ; Repetir el bucle para probar el siguiente cuadrado

OVER:   dec b              ; Retroceder un valor para obtener la raíz entera correcta

DONE:   ld c, b            ; Colocar el resultado final (la raíz cuadrada) en C
        ret                ; Terminar y devolver el resultado en C

